МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
 
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
 
Кафедра «Програмна інженерія»
 
 


ЗВІТ
до лабораторної роботи 3
з дисципліни «Розробка бізнес логіки та функцій адміністрування серверної частини системи»

 




Виконав:                                                           	 Перевірив:
ст. гр. ПЗПІ-23-3                                     	       	          ст. викладач катедри ПІ
Першина М. А.                                     	       	         Сокорчук Ігор Петрович






Харків 2025


1 ІСТОРІЯ ЗМІН
№	Дата	Версія звіту	Опис змін та виправлень
1	01.12.2025	0.1	Початок роботи серверною частиною програми
2	10.12.2025	0.2	Доопрацювання звіту та відеозапису



2 ЗАВДАННЯ
Ознайомитися з процесом розробки бізнес логіки та функцій адміністрування серверної частини програмної системи. Отримати практичні навички реалізації бізнес логіки, функцій адміністрування, створення UML-діаграм діяльності та взаємодії, а також перевірки (тестування) роботи серверної частини.

3. ОПИС ВИКОНАНОЇ РОБОТИ
Розроблено комплексну REST API систему для догляду за рослинами з інтелектуальним аналізом даних IoT датчиків. Система забезпечує автентифікацію користувачів, управління рослинами та автоматичний аналіз даних для генерації команд виконавчим пристроям.
3.1 Автентифікація та авторизація
Система використовує JWT токени для безпечної автентифікації користувачів. Реалізовано ролеву модель доступу з розділенням прав між звичайними користувачами та адміністраторами.
•	Реєстрація нового користувача
Запит:
POST /api/auth/register
{
  "email": "demo@example.com",
  "first_name": "Demo",
  "last_name": "User",
  "password": "123456"
}
Відповідь:
{
  "success": true,
  "data": {
    "user": {
      "user_id": 1,
      "email": "demo@example.com",
      "first_name": "Demo",
      "last_name": "User",
      "role": "user",
      "created_at": "2025-12-14T13:42:45.747Z"
    }
  },
  "message": "User registered successfully. Please login to get access token."
}
•	Вхід в систему
Запит:
POST /api/auth/login
{
  "email": "demo@example.com", 
  "password": "123456"
}
Відповідь:
{
  "success": true,
  "data": {
    "user": {
      "user_id": 1,
      "email": "demo@example.com",
      "first_name": "Demo",
      "last_name": "User",
      "role": "user",
      "last_login": "2025-12-14T16:30:15.123Z"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "message": "Login successful"
}

3.2 Управління типами рослин
Система підтримує різні типи рослин з їх оптимальними параметрами для вирощування. Кожен тип має встановлені значення вологості, температури, освітленості та частоти поливу.
Запит:
GET /api/plant-types
Відповідь:
{
  "success": true,
  "data": [
    {
      "plant_type_id": 1,
      "name": "Фіалка кімнатна",
      "optimal_humidity": 65.0,
      "optimal_temperature": 20.0,
      "optimal_light": 15000,
      "watering_frequency": 3
    }
  ]
}



3.3 CRUD операції для рослин користувача
Користувачі можуть створювати, переглядати, редагувати та видаляти свої рослини. Система забезпечує ізоляцію даних - користувач має доступ тільки до власних рослин.
•	Створення рослини
Запит:
POST /api/my-plants
Authorization: Bearer {JWT_TOKEN}
{
  "plant_type_id": 1,
  "name": "Моя фіалка",
  "location": "Підвіконня"
}
Відповідь:
{
  "success": true,
  "data": {
    "plant_id": 5,
    "user_id": 1,
    "plant_type_id": 1,
    "name": "Моя фіалка",
    "location": "Підвіконня",
    "plantType": {
      "plant_type_id": 1,
      "name": "Фіалка кімнатна",
      "optimal_humidity": 65.0,
      "optimal_temperature": 20.0,
      "optimal_light": 15000,
      "watering_frequency": 3
    },
    "created_at": "2025-12-14T16:45:12.456Z"
  },
  "message": "Plant created successfully"
}

•	Перегляд власних рослин
Запит:
GET /api/my-plants
Authorization: Bearer {JWT_TOKEN}
Відповідь:
{
  "success": true,
  "data": [
    {
      "plant_id": 5,
      "name": "Моя фіалка",
      "location": "Підвіконня",
      "plantType": {
        "name": "Фіалка кімнатна",
        "optimal_humidity": 65.0,
        "optimal_temperature": 20.0
      },
      "created_at": "2025-12-14T16:45:12.456Z"
    }
  ],
  "message": "Your plants retrieved successfully"
}

3.4 Адміністративні функції
Адміністратори мають розширені права доступу до всіх даних системи, включаючи перегляд всіх користувачів, рослин, датчиків та даних з датчиків.
•	Перегляд всіх користувачів
Запит:
GET /api/users
Authorization: Bearer {ADMIN_JWT_TOKEN}

Відповідь:
{
  "success": true,
  "data": [
    {
      "user_id": 1,
      "email": "admin@plantcare.com",
      "first_name": "Admin",
      "last_name": "System",
      "role": "admin",
      "last_login": "2025-12-14T15:30:22.789Z"
    }
  ]
}

•	Перегляд всіх датчиків
Запит: GET /api/sensors
Authorization: Bearer {ADMIN_JWT_TOKEN}
Відповідь:
{
  "success": true,
  "data": [
    {
      "sensor_id": 1,
      "plant_id": 1,
      "sensor_type": "humidity",
      "hardware_id": "HUM_001_A1B2",
      "is_active": true,
      "plant": {
        "plant_id": 1,
        "name": "Моя улюблена фіалка",
        "location": "Підвіконня кухні"
      }
    }
  ]
}

3.5 Інтелектуальний аналіз даних IoT датчиків
Найголовніша інноваційна функція системи - автоматичний аналіз даних з IoT датчиків з генерацією конкретних команд для виконавчих пристроїв. Система порівнює поточні показники з оптимальними значеннями для кожного типу рослини та створює персоналізовані рекомендації.
Запит:
POST /api/sensors/analyze
{
  "hardware_ids": [
    "HUM_001_A1B2", 
    "TEMP_001_C3D4", 
    "LIGHT_001_E5F6",
    "HUM_002_G7H8"
  ]
}
Відповідь наведено у додатку Б.

3.6 Інші реалізовані функції
Система також включає наступні додаткові ендпоінти:
•	Редагування рослин (PUT /api/my-plants/{id}) - оновлення назви та локації рослин
•	Видалення рослин (DELETE /api/my-plants/{id}) - видалення власних рослин
•	Створення типів рослин (POST /api/plant-types) - адміністративна функція
•	Перегляд всіх рослин (GET /api/plants) - адміністративний доступ
•	Вихід з системи (POST /api/auth/logout) - завершення сесії
•	Отримання профілю (GET /api/auth/me) - інформація про поточного користувача


4. ВИСНОВКИ
У ході виконання лабораторної роботи №3 успішно розроблено REST API систему догляду за рослинами з використанням Node.js, Express.js, PostgreSQL та JWT автентифікації. Реалізовано повний набір CRUD операцій для управління рослинами користувачів з ролевою моделлю доступу та створено інноваційний модуль інтелектуального аналізу IoT даних, який автоматично порівнює показники датчиків з оптимальними параметрами та генерує конкретні команди для виконавчих пристроїв (полив, освітлення, вентиляція). Система готова для інтеграції з реальними IoT пристроями та демонструє не просто CRUD API, а інтелектуальну платформу для автоматизації догляду за рослинами.

5. ВИКОРИСТАНІ ДЖЕРЕЛА
1.	Node.js Official Documentation [Електронний ресурс]. – Режим доступу: https://nodejs.org/en/docs/ – Дата доступу: 13.12.2025. 
2.	Express.js Framework Documentation [Електронний ресурс]. – Режим доступу: https://expressjs.com/ – Дата доступу: 13.12.2025. 
3.	Sequelize ORM Documentation [Електронний ресурс]. – Режим доступу: https://sequelize.org/docs/ – Дата доступу: 13.12.2025. 
4.	PostgreSQL Official Documentation [Електронний ресурс]. – Режим доступу: https://www.postgresql.org/docs/ – Дата доступу: 13.12.2025. 
5.	OpenAPI Specification 3.0 [Електронний ресурс]. – Режим доступу: https://swagger.io/specification/ – Дата доступу: 13.12.2025. 
6.	TypeScript Documentation [Електронний ресурс]. – Режим доступу: https://www.typescriptlang.org/docs/ – Дата доступу: 13.12.2025. 
7.	Docker Documentation [Електронний ресурс]. – Режим доступу: https://docs.docker.com/ – Дата доступу: 13.12.2025. 




ДОДАТОК А
Відеозапис

Відеозапис доповіді: https://youtu.be/_gSeADhV1Uc

Хронологічний опис відеозапису: 
00:00 - Вступ 
00:23 - Реєстрація
00:47 - Вхід в аккаунт 
01:26 - Отримати список всіх типів рослин 
02:08 - Створення рослини 
02:40 - Отримати список всіх рослин користувача
03:17 - Вхід в аккаунт адміна
03:56 - Отримати список всіх користувачів 
04:32 - Отримати список всіх рослин
05:22 - Отримати дані з датчиків
06:16 - Створення нового типу рослини
06:50 - Аналіз даних з IoT-датчиків
09:28 – Запит без токену


 
 



 
ДОДАТОК Б

Відповідь на запит аналізу даних з IoT датчиків
{
  "success": true,
  "data": {
    "timestamp": "2025-12-14T17:21:33.205Z",
    "analyzed_plants": 2,
    "results": [
      {
        "plant_id": 1,
        "plant_name": "Моя улюблена фіалка",
        "plant_type": "Фіалка кімнатна",
        "current_conditions": {
          "humidity": 52.74,
          "temperature": 20.04,
          "light": 14531.27
        },
        "optimal_conditions": {
          "humidity": 65,
          "temperature": 20,
          "light": 15000,
          "watering_frequency": 3
        },
        "deviations": {
          "humidity_deviation": -12.26,
          "temperature_deviation": 0.04,
          "light_deviation": -469
        },
        "recommendations": [
          {
            "device_type": "watering",
            "action": "start",
            "value": 150,
            "duration": 1,
            "priority": "medium",
            "reason": "Low humidity: 52.74% (optimal: 65%)"
          }
        ],
        "overall_status": "needs_attention"
      },
    ],
    "total_recommendations": 1
  },
  "message": "Intelligent sensor analysis completed successfully"
}

